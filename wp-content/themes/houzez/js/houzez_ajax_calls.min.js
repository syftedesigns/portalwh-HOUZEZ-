jQuery(document).ready(function($){"use strict";if("undefined"!=typeof HOUZEZ_ajaxcalls_vars){var houzezMap,houzezOSM,osm_markers_cluster,lastClickedMarker,markers=new Array,markerCluster=null,current_marker=0,has_compare=$("#compare-controller").length,custom_fields=HOUZEZ_ajaxcalls_vars.custom_fields,search_custom_fields=$.parseJSON(custom_fields),markerPricePins=HOUZEZ_ajaxcalls_vars.markerPricePins,houzez_map_system=HOUZEZ_ajaxcalls_vars.houzez_map_system,is_mapbox=HOUZEZ_ajaxcalls_vars.is_mapbox,api_mapbox=HOUZEZ_ajaxcalls_vars.api_mapbox,is_marker_cluster=HOUZEZ_ajaxcalls_vars.is_marker_cluster,ajaxurl=HOUZEZ_ajaxcalls_vars.admin_url+"admin-ajax.php",login_sending=HOUZEZ_ajaxcalls_vars.login_loading,userID=HOUZEZ_ajaxcalls_vars.user_id,houzez_reCaptcha=HOUZEZ_ajaxcalls_vars.houzez_reCaptcha,login_redirect_type=HOUZEZ_ajaxcalls_vars.redirect_type,login_redirect=HOUZEZ_ajaxcalls_vars.login_redirect,prop_lat=HOUZEZ_ajaxcalls_vars.property_lat,prop_lng=HOUZEZ_ajaxcalls_vars.property_lng,autosearch_text=HOUZEZ_ajaxcalls_vars.autosearch_text,paypal_connecting=HOUZEZ_ajaxcalls_vars.paypal_connecting,mollie_connecting=HOUZEZ_ajaxcalls_vars.mollie_connecting,process_loader_refresh=HOUZEZ_ajaxcalls_vars.process_loader_refresh,process_loader_spinner=HOUZEZ_ajaxcalls_vars.process_loader_spinner,process_loader_circle=HOUZEZ_ajaxcalls_vars.process_loader_circle,process_loader_cog=HOUZEZ_ajaxcalls_vars.process_loader_cog,success_icon=HOUZEZ_ajaxcalls_vars.success_icon,confirm_message=HOUZEZ_ajaxcalls_vars.confirm,confirm_featured=HOUZEZ_ajaxcalls_vars.confirm_featured,confirm_featured_remove=HOUZEZ_ajaxcalls_vars.confirm_featured_remove,confirm_relist=HOUZEZ_ajaxcalls_vars.confirm_relist,is_singular_property=HOUZEZ_ajaxcalls_vars.is_singular_property,property_map=HOUZEZ_ajaxcalls_vars.property_map,property_map_street=HOUZEZ_ajaxcalls_vars.property_map_street,currency_symb=HOUZEZ_ajaxcalls_vars.currency_symbol,marker_spiderfier=HOUZEZ_ajaxcalls_vars.marker_spiderfier,advanced_search_price_range_min=parseInt(HOUZEZ_ajaxcalls_vars.advanced_search_widget_min_price),advanced_search_price_range_max=parseInt(HOUZEZ_ajaxcalls_vars.advanced_search_widget_max_price),advanced_search_price_range_min_rent=parseInt(HOUZEZ_ajaxcalls_vars.advanced_search_min_price_range_for_rent),advanced_search_price_range_max_rent=parseInt(HOUZEZ_ajaxcalls_vars.advanced_search_max_price_range_for_rent),advanced_search_widget_min_area=parseInt(HOUZEZ_ajaxcalls_vars.advanced_search_widget_min_area),advanced_search_widget_max_area=parseInt(HOUZEZ_ajaxcalls_vars.advanced_search_widget_max_area),advanced_search_price_slide=HOUZEZ_ajaxcalls_vars.advanced_search_price_slide,fave_page_template=HOUZEZ_ajaxcalls_vars.fave_page_template,fave_prop_featured=HOUZEZ_ajaxcalls_vars.prop_featured,featured_listings_none=HOUZEZ_ajaxcalls_vars.featured_listings_none,prop_sent_for_approval=HOUZEZ_ajaxcalls_vars.prop_sent_for_approval,houzez_rtl=HOUZEZ_ajaxcalls_vars.houzez_rtl,infoboxClose=HOUZEZ_ajaxcalls_vars.infoboxClose,clusterIcon=HOUZEZ_ajaxcalls_vars.clusterIcon,paged=HOUZEZ_ajaxcalls_vars.paged,sort_by=HOUZEZ_ajaxcalls_vars.sort_by,google_map_style=HOUZEZ_ajaxcalls_vars.google_map_style;if(""!=google_map_style)var google_map_style=JSON.parse(google_map_style);var googlemap_default_zoom=HOUZEZ_ajaxcalls_vars.googlemap_default_zoom,googlemap_zoom_cluster=HOUZEZ_ajaxcalls_vars.googlemap_zoom_cluster,map_icons_path=HOUZEZ_ajaxcalls_vars.map_icons_path,google_map_needed=HOUZEZ_ajaxcalls_vars.google_map_needed,simple_logo=HOUZEZ_ajaxcalls_vars.simple_logo,retina_logo=HOUZEZ_ajaxcalls_vars.retina_logo,retina_logo_mobile=HOUZEZ_ajaxcalls_vars.retina_logo_mobile,retina_logo_mobile_splash=HOUZEZ_ajaxcalls_vars.retina_logo_mobile_splash,retina_logo_splash=HOUZEZ_ajaxcalls_vars.retina_logo_splash,retina_logo_height=HOUZEZ_ajaxcalls_vars.retina_logo_height,retina_logo_width=HOUZEZ_ajaxcalls_vars.retina_logo_width,transparent_menu=HOUZEZ_ajaxcalls_vars.transparent_menu,transportation=HOUZEZ_ajaxcalls_vars.transportation,supermarket=HOUZEZ_ajaxcalls_vars.supermarket,schools=HOUZEZ_ajaxcalls_vars.schools,libraries=HOUZEZ_ajaxcalls_vars.libraries,pharmacies=HOUZEZ_ajaxcalls_vars.pharmacies,hospitals=HOUZEZ_ajaxcalls_vars.hospitals,currency_position=HOUZEZ_ajaxcalls_vars.currency_position,currency_updating_msg=HOUZEZ_ajaxcalls_vars.currency_updating_msg,submission_currency=HOUZEZ_ajaxcalls_vars.submission_currency,wire_transfer_text=HOUZEZ_ajaxcalls_vars.wire_transfer_text,direct_pay_thanks=HOUZEZ_ajaxcalls_vars.direct_pay_thanks,direct_payment_title=HOUZEZ_ajaxcalls_vars.direct_payment_title,direct_payment_button=HOUZEZ_ajaxcalls_vars.direct_payment_button,direct_payment_details=HOUZEZ_ajaxcalls_vars.direct_payment_details,measurement_unit=HOUZEZ_ajaxcalls_vars.measurement_unit,measurement_updating_msg=HOUZEZ_ajaxcalls_vars.measurement_updating_msg,thousands_separator=HOUZEZ_ajaxcalls_vars.thousands_separator,rent_status_for_price_range=HOUZEZ_ajaxcalls_vars.for_rent_price_range,current_tempalte=HOUZEZ_ajaxcalls_vars.current_tempalte,not_found=HOUZEZ_ajaxcalls_vars.not_found,property_detail_top=HOUZEZ_ajaxcalls_vars.property_detail_top,keyword_search_field=HOUZEZ_ajaxcalls_vars.keyword_search_field,keyword_autocomplete=HOUZEZ_ajaxcalls_vars.keyword_autocomplete,template_thankyou=HOUZEZ_ajaxcalls_vars.template_thankyou,direct_pay_text=HOUZEZ_ajaxcalls_vars.direct_pay_text,search_result_page=HOUZEZ_ajaxcalls_vars.search_result_page,houzez_default_radius=HOUZEZ_ajaxcalls_vars.houzez_default_radius,enable_radius_search=HOUZEZ_ajaxcalls_vars.enable_radius_search,enable_radius_search_halfmap=HOUZEZ_ajaxcalls_vars.enable_radius_search_halfmap,houzez_primary_color=HOUZEZ_ajaxcalls_vars.houzez_primary_color,houzez_geocomplete_country=HOUZEZ_ajaxcalls_vars.geocomplete_country,houzez_logged_in=HOUZEZ_ajaxcalls_vars.houzez_logged_in,ipinfo_location=HOUZEZ_ajaxcalls_vars.ipinfo_location,delete_property_loading=HOUZEZ_ajaxcalls_vars.delete_property,delete_property_confirmation=HOUZEZ_ajaxcalls_vars.delete_confirmation,compare_button_url=HOUZEZ_ajaxcalls_vars.compare_button_url,compare_page_not_found=HOUZEZ_ajaxcalls_vars.compare_page_not_found;houzez_rtl="yes"==houzez_rtl;var special_chars={"&amp;":"&","&quot;":'"',"&#039;":"'","&#8217;":"’","&#038;":"&","&lt;":"<","&gt;":">","&#8216;":"‘","&#8230;":"…","&#8221;":"”","&#8211;":"–","&#8212;":"—"};if(""!==retina_logo&&""!==retina_logo_width&&""!==retina_logo_height&&2==window.devicePixelRatio&&("yes"==transparent_menu?($(".houzez-header-transparent .logo-desktop img").attr("src",retina_logo_splash),$(".houzez-header-transparent .logo-desktop img").attr("width",retina_logo_width),$(".houzez-header-transparent .logo-desktop img").attr("height",retina_logo_height),$(".sticky_nav.header-section-4 .logo-desktop img").attr("src",retina_logo),$(".sticky_nav.header-section-4 .logo-desktop img").attr("width",retina_logo_width),$(".sticky_nav.header-section-4 .logo-desktop img").attr("height",retina_logo_height)):($(".logo-desktop img").attr("src",retina_logo),$(".logo-desktop img").attr("width",retina_logo_width),$(".logo-desktop img").attr("height",retina_logo_height))),""!==retina_logo_splash&&""!==retina_logo_width&&""!==retina_logo_height&&2==window.devicePixelRatio&&($(".splash-header .logo-desktop img").attr("src",retina_logo_splash),$(".splash-header .logo-desktop img").attr("width",retina_logo_width),$(".splash-header .logo-desktop img").attr("height",retina_logo_height)),""!==retina_logo_mobile&&2==window.devicePixelRatio&&$(".logo-mobile img").attr("src",retina_logo_mobile),""!==retina_logo_mobile_splash&&2==window.devicePixelRatio&&$(".logo-mobile-splash img").attr("src",retina_logo_mobile_splash),"yes"==google_map_needed){var houzezOSMTileLayer=function(){if("mapbox"==is_mapbox&&""!=api_mapbox)var e=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token="+api_mapbox,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMapx</a> contributors',maxZoom:18,id:"mapbox.streets",accessToken:"your.mapbox.access.token"});else e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});return e},houzez_initialize_osm_map=function(e){var a=houzezOSMTileLayer();e.addLayer(a),e.on("popupopen",function(e){"yes"==markerPricePins&&$(".leaflet-popup").addClass("leaflet-price-left")})},houzez_open_street_map=function(){L.latLng(32.1619634,74.2003705);var e=!L.Browser.mobile;if(document.getElementById("houzez-listing-map"))(houzezOSM=L.map("houzez-listing-map",{zoom:parseInt(googlemap_default_zoom),dragging:e,tap:!1}).on("load",function(e){jQuery("#houzez-map-loading").hide()})).scrollWheelZoom.disable();else{if(!document.getElementById("mapViewHalfListings"))return;(houzezOSM=L.map("mapViewHalfListings",{zoom:parseInt(googlemap_default_zoom),dragging:e,tap:!1}).on("load",function(e){jQuery("#houzez-map-loading").hide()})).scrollWheelZoom.disable()}houzez_initialize_osm_map(houzezOSM)};"osm"==houzez_map_system&&houzez_open_street_map();var placesIDs=new Array,transportationsMarkers=new Array,supermarketsMarkers=new Array,schoolsMarkers=new Array,librariesMarkers=new Array,pharmaciesMarkers=new Array,hospitalsMarkers=new Array,drgflag=!0,houzez_is_mobile=!1;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(drgflag=!1,houzez_is_mobile=!0),"google"==houzez_map_system){var houzezMapoptions={zoom:parseInt(googlemap_default_zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:google_map_style,zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,overviewMapControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}},houzezHeaderMapOptions={maxZoom:20,disableDefaultUI:!0,scroll:{x:$(window).scrollLeft(),y:$(window).scrollTop()},zoom:parseInt(googlemap_default_zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:google_map_style};document.getElementById("houzez-listing-map")?(houzezMap=new google.maps.Map(document.getElementById("houzez-listing-map"),houzezHeaderMapOptions),houzez_is_mobile?houzezMap.setOptions({gestureHandling:"cooperative"}):houzezMap.setOptions({scrollwheel:!1})):document.getElementById("mapViewHalfListings")&&(houzezMap=new google.maps.Map(document.getElementById("mapViewHalfListings"),houzezMapoptions),houzez_is_mobile?houzezMap.setOptions({gestureHandling:"cooperative"}):houzezMap.setOptions({scrollwheel:!0}));var infobox=new InfoBox({disableAutoPan:!1,maxWidth:275,alignBottom:!0,pixelOffset:new google.maps.Size(-135,-75),zIndex:null,boxClass:"houzezInfobox",closeBoxMargin:"0px -16px -16px -16px",closeBoxURL:infoboxClose,infoBoxClearance:new google.maps.Size(10,10),pane:"floatPane",enableEventPropagation:!1}),poiInfo=new InfoBox({disableAutoPan:!1,maxWidth:250,pixelOffset:new google.maps.Size(-72,-70),zIndex:null,boxStyle:{background:"#ffffff",opacity:1,padding:"6px","box-shadow":"0 1px 2px 0 rgba(0, 0, 0, 0.12)",width:"145px","text-align":"center","border-radius":"4px"},closeBoxMargin:"28px 26px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),pane:"floatPane",enableEventPropagation:!1}),iw=new google.maps.InfoWindow,houzezGetPOIs=function(e,s,t){var a=new google.maps.places.PlacesService(s),r=s.getBounds(),o=new Array;switch(t){case"transportations":o=["bus_station","subway_station","train_station","airport"];break;case"supermarkets":o=["grocery_or_supermarket","shopping_mall"];break;case"schools":o=["school","university"];break;case"libraries":o=["library"];break;case"pharmacies":o=["pharmacy"];break;case"hospitals":o=["hospital"]}a.nearbySearch({location:e,bounds:r,radius:2e3,types:o},function(e,a){if(a===google.maps.places.PlacesServiceStatus.OK)for(var r=0;r<e.length;r++)-1==jQuery.inArray(e[r].place_id,placesIDs)&&(houzezCreatePOI(e[r],s,t),placesIDs.push(e[r].place_id))})},houzezCreatePOI=function(e,a,r){var s;switch(r){case"transportations":s=new google.maps.Marker({map:a,position:e.geometry.location,icon:map_icons_path+"transportation.png"}),transportationsMarkers.push(s);break;case"supermarkets":s=new google.maps.Marker({map:a,position:e.geometry.location,icon:map_icons_path+"supermarket.png"}),supermarketsMarkers.push(s);break;case"schools":s=new google.maps.Marker({map:a,position:e.geometry.location,icon:map_icons_path+"school.png"}),schoolsMarkers.push(s);break;case"libraries":s=new google.maps.Marker({map:a,position:e.geometry.location,icon:map_icons_path+"libraries.png"}),librariesMarkers.push(s);break;case"pharmacies":s=new google.maps.Marker({map:a,position:e.geometry.location,icon:map_icons_path+"pharmacy.png"}),pharmaciesMarkers.push(s);break;case"hospitals":s=new google.maps.Marker({map:a,position:e.geometry.location,icon:map_icons_path+"hospital.png"}),hospitalsMarkers.push(s)}google.maps.event.addListener(s,"mouseover",function(){poiInfo.setContent(e.name),poiInfo.open(a,this)}),google.maps.event.addListener(s,"mouseout",function(){poiInfo.open(null,null)})},houzezTooglePOIs=function(e,a){for(var r=0;r<a.length;r++)null!=a[r].getMap()?a[r].setMap(null):a[r].setMap(e)},houzezPoiControls=function(e,r,s){e.style.clear="both";var a=document.createElement("div");a.id="transportation",a.class="transportation",a.title=transportation,e.appendChild(a);var t=document.createElement("div");t.id="transportationIcon",t.innerHTML='<div class="icon"><img src="'+map_icons_path+'transportation-panel-icon.png" alt=""></div><span>'+transportation+"</span>",a.appendChild(t);var o=document.createElement("div");o.id="supermarkets",o.title=supermarket,e.appendChild(o);var n=document.createElement("div");n.id="supermarketsIcon",n.innerHTML='<div class="icon"><img src="'+map_icons_path+'supermarket-panel-icon.png" alt=""></div><span>'+supermarket+"</span>",o.appendChild(n);var i=document.createElement("div");i.id="schools",i.title=schools,e.appendChild(i);var l=document.createElement("div");l.id="schoolsIcon",l.innerHTML='<div class="icon"><img src="'+map_icons_path+'school-panel-icon.png" alt=""></div><span>'+schools+"</span>",i.appendChild(l);var c=document.createElement("div");c.id="libraries",c.title=libraries,e.appendChild(c);var p=document.createElement("div");p.id="librariesIcon",p.innerHTML='<div class="icon"><img src="'+map_icons_path+'libraries-panel-icon.png" alt=""></div><span>'+libraries+"</span>",c.appendChild(p);var _=document.createElement("div");_.id="pharmacies",_.title=pharmacies,e.appendChild(_);var d=document.createElement("div");d.id="pharmaciesIcon",d.innerHTML='<div class="icon"><img src="'+map_icons_path+'pharmacy-panel-icon.png" alt=""></div><span>'+pharmacies+"</span>",_.appendChild(d);var u=document.createElement("div");u.id="hospitals",u.title=hospitals,e.appendChild(u);var m=document.createElement("div");m.id="hospitalsIcon",m.innerHTML='<div class="icon"><img src="'+map_icons_path+'hospital-panel-icon.png" alt=""></div><span>'+hospitals+"</span>",u.appendChild(m),a.addEventListener("click",function(){var a=this;$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),houzezGetPOIs(s,r,"transportations")),houzezTooglePOIs(r,transportationsMarkers),google.maps.event.addListener(r,"bounds_changed",function(){if($(a).hasClass("active")){var e=r.getCenter();houzezGetPOIs(e,r,"transportations")}})}),o.addEventListener("click",function(){var a=this;$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),houzezGetPOIs(s,r,"supermarkets")),houzezTooglePOIs(r,supermarketsMarkers),google.maps.event.addListener(r,"bounds_changed",function(){if($(a).hasClass("active")){var e=r.getCenter();houzezGetPOIs(e,r,"supermarkets")}})}),i.addEventListener("click",function(){var a=this;$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),houzezGetPOIs(s,r,"schools")),houzezTooglePOIs(r,schoolsMarkers),google.maps.event.addListener(r,"bounds_changed",function(){if($(a).hasClass("active")){var e=r.getCenter();houzezGetPOIs(e,r,"schools")}})}),c.addEventListener("click",function(){var a=this;$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),houzezGetPOIs(s,r,"libraries")),houzezTooglePOIs(r,librariesMarkers),google.maps.event.addListener(r,"bounds_changed",function(){if($(a).hasClass("active")){var e=r.getCenter();houzezGetPOIs(e,r,"libraries")}})}),_.addEventListener("click",function(){var a=this;$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),houzezGetPOIs(s,r,"pharmacies")),houzezTooglePOIs(r,pharmaciesMarkers),google.maps.event.addListener(r,"bounds_changed",function(){if($(a).hasClass("active")){var e=r.getCenter();houzezGetPOIs(e,r,"pharmacies")}})}),u.addEventListener("click",function(){var a=this;$(this).hasClass("active")?$(this).removeClass("active"):($(this).addClass("active"),houzezGetPOIs(s,r,"hospitals")),houzezTooglePOIs(r,hospitalsMarkers),google.maps.event.addListener(r,"bounds_changed",function(){if($(a).hasClass("active")){var e=r.getCenter();houzezGetPOIs(e,r,"hospitals")}})})},houzezSetPOIControls=function(e,a){var r=document.createElement("div");new houzezPoiControls(r,e,a);r.index=1,r.style["padding-left"]="10px",e.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(r)},remove_map_loader=function(){google.maps.event.addListener(houzezMap,"tilesloaded",function(){jQuery("#houzez-map-loading").hide()})},houzez_map_parallax=function(){var e=$(houzezMap.getDiv()).offset();houzezMap.panBy((houzezHeaderMapOptions.scroll.x-e.left)/3,(houzezHeaderMapOptions.scroll.y-e.top)/3),google.maps.event.addDomListener(window,"scroll",function(){var e=$(window).scrollTop(),a=$(window).scrollLeft(),r=houzezMap.get("scroll");r&&houzezMap.panBy(-(r.x-a)/3,-(r.y-e)/3),houzezMap.set("scroll",{x:a,y:e})})},houzez_map_bounds=function(){houzezMap.fitBounds(markers.reduce(function(e,a){return e.extend(a.getPosition())},new google.maps.LatLngBounds))},houzez_markerCluster=function(){if(0!=is_marker_cluster){var e=16;(googlemap_zoom_cluster=parseInt(googlemap_zoom_cluster))&&(e=googlemap_zoom_cluster),markerCluster=new MarkerClusterer(houzezMap,markers,{maxZoom:e,gridSize:60,styles:[{url:clusterIcon,width:48,height:48,textColor:"#fff"}]})}}}var houzezMapHover=function(){$("body").on("mouseenter",".gm-marker",function(){var e=$(this).attr("data-id");$(".gm-marker[data-id="+e+"]").addClass("hover-state")}).on("mouseleave",".gm-marker",function(){var e=$(this).attr("data-id");$(".gm-marker[data-id="+e+"]").removeClass("hover-state")}),$("body").on("click",".gm-marker",function(){$(lastClickedMarker).removeClass("active"),$(this).addClass("active"),lastClickedMarker=$(this)})};houzezMapHover()}if(1==has_compare){var compare_panel=function(){$(".panel-btn").on("click",function(){$(".compare-panel").hasClass("panel-open")?$(".compare-panel").removeClass("panel-open"):$(".compare-panel").addClass("panel-open")})},compare_panel_close=function(){$(".compare-panel").hasClass("panel-open")&&$(".compare-panel").removeClass("panel-open")},compare_panel_open=function(){$(".compare-panel").addClass("panel-open")},houzez_compare_listing=function(){$(".compare-property").click(function(e){e.preventDefault();var a=$(this),r={action:"houzez_compare_add_property",prop_id:a.attr("data-propid")};a.find("i.fa-plus").addClass("fa-spin"),$.post(ajaxurl,r,function(e){a.find("i.fa-plus").removeClass("fa-spin"),$.post(ajaxurl,{action:"houzez_compare_update_basket"},function(e){$("div#compare-properties-basket").replaceWith(e),compare_panel(),compare_panel_open()})})})};houzez_compare_listing(),$(document).on("click","#compare-properties-basket .compare-property-remove",function(e){e.preventDefault();var a=jQuery(this).parent().attr("property-id");$(this).parent().block({message:'<i class="'+process_loader_spinner+'"></i>',css:{border:"none",backgroundColor:"none",fontSize:"16px"}});var r={action:"houzez_compare_add_property",prop_id:a};$.post(ajaxurl,r,function(e){$.post(ajaxurl,{action:"houzez_compare_update_basket"},function(e){$("div#compare-properties-basket").replaceWith(e),compare_panel()})})}),jQuery(document).on("click",".compare-properties-button",function(){return""!=compare_button_url?window.location.href=compare_button_url:alert(compare_page_not_found),!1})}if(0<$(".houzez-print").length&&$(".houzez-print").click(function(e){var propID,printWindow;e.preventDefault(),propID=$(this).attr("data-propid"),printWindow=window.open("","Print Me","width=700 ,height=842"),$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_create_print",propid:propID},success:function(e){printWindow.document.write(e),printWindow.document.close(),printWindow.focus()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),houzez_rtl){var visual_composer_stretch_row=function(){var e=$('[data-vc-full-width="true"]');$.each(e,function(e,a){var r=$(this);r.addClass("vc_hidden");var s=r.next(".vc_row-full-width"),t=parseInt(r.css("margin-left"),10),o=parseInt(r.css("margin-right"),10),n=0-s.offset().left-t,i=$(window).width();if(r.css({position:"relative",left:n,right:n,"box-sizing":"border-box",width:$(window).width()}),!r.data("vcStretchContent")){var l=-1*n;l<0&&(l=0);var c=i-l-s.width()+t+o;c<0&&(c=0),r.css({"padding-left":l+"px","padding-right":c+"px"})}r.attr("data-vc-full-width-init","true"),r.removeClass("vc_hidden")})};visual_composer_stretch_row(),$(window).resize(function(){visual_composer_stretch_row()})}var view_btn=$(".view-btn ");0<view_btn.length&&(view_btn.click(function(){$.removeCookie("properties-layout"),$.removeCookie("layout-btn"),$(this).hasClass("btn-list")?($.cookie("properties-layout","list-view"),$.cookie("layout-btn","btn-list")):$(this).hasClass("btn-grid")?($.cookie("properties-layout","grid-view"),$.cookie("layout-btn","btn-grid")):$(this).hasClass("btn-grid-3-col")&&($.cookie("properties-layout","grid-view-3-col"),$.cookie("layout-btn","btn-grid-3-col"))}),"undefined"!=$.cookie("properties-layout")&&("list-view"==$.cookie("properties-layout")&&"template-search.php"!=fave_page_template&&"user_dashboard_favorites.php"!=fave_page_template?($(".property-listing").removeClass("grid-view grid-view-3-col"),$(".property-listing").addClass("list-view")):"grid-view"==$.cookie("properties-layout")&&"template-search.php"!=fave_page_template&&"user_dashboard_favorites.php"!=fave_page_template?($(".property-listing").removeClass("list-view grid-view grid-view-3-col"),$(".property-listing").addClass("grid-view")):"grid-view-3-col"==$.cookie("properties-layout")&&"template-search.php"!=fave_page_template&&"user_dashboard_favorites.php"!=fave_page_template&&($(".property-listing").removeClass("list-view grid-view"),$(".property-listing").addClass("grid-view grid-view-3-col"))),"undefined"!=$.cookie("layout-btn")&&("btn-list"==$.cookie("layout-btn")?($(".view-btn").removeClass("active"),$(".view-btn.btn-list").addClass("active")):"btn-grid"==$.cookie("layout-btn")?($(".view-btn").removeClass("active"),$(".view-btn.btn-grid").addClass("active")):"btn-grid-3-col"==$.cookie("layout-btn")&&($(".view-btn").removeClass("active"),$(".view-btn.btn-grid-3-col").addClass("active"))));var addCommas=function(e){for(var a=(e+="").split("."),r=a[0],s=1<a.length?"."+a[1]:"",t=/(\d+)(\d{3})/;t.test(r);)r=r.replace(t,"$1"+thousands_separator+"$2");return r+s},properties_module_section=$("#properties_module_section");if(0<properties_module_section.length){var properties_module_container=$("#properties_module_container"),paginationLink=$(".property-item-module ul.pagination li a"),fave_loader=$(".fave-svg-loader");$("body").on("click",".fave-load-more a",function(e){e.preventDefault();var $this=$(this);$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>');var $wrap=$this.closest("#properties_module_section").find("#module_properties"),prop_limit=$this.data("prop-limit"),paged=$this.data("paged"),grid_style=$this.data("grid-style"),type=$this.data("type"),status=$this.data("status"),state=$this.data("state"),city=$this.data("city"),area=$this.data("area"),label=$this.data("label"),user_role=$this.data("user-role"),featured_prop=$this.data("featured-prop"),offset=$this.data("offset"),sortby=$this.data("sortby");$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_loadmore_properties",prop_limit:prop_limit,paged:paged,grid_style:grid_style,type:type,status:status,state:state,city:city,area:area,label:label,user_role:user_role,featured_prop:featured_prop,sort_by:sortby,offset:offset},success:function(e){"no_result"!=e?($this.closest("#properties_module_section").find("#module_properties").append(e),$this.data("paged",paged+1),$this.find("i").remove(),houzez_init_add_favorite(),houzez_init_remove_favorite(),$('[data-toggle="tooltip"]').tooltip(),1==has_compare&&houzez_compare_listing()):$this.closest("#properties_module_section").find(".fave-load-more").fadeOut("fast").remove()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})})}var fave_property_status_changed=function(e,a){e==HOUZEZ_ajaxcalls_vars.for_rent?(a.find(".prices-for-all").addClass("hide"),a.find(".prices-for-all select").attr("disabled","disabled"),a.find(".prices-only-for-rent").removeClass("hide"),a.find(".prices-only-for-rent select").removeAttr("disabled","disabled"),a.find(".prices-only-for-rent select").selectpicker("refresh")):(a.find(".prices-only-for-rent").addClass("hide"),a.find(".prices-only-for-rent select").attr("disabled","disabled"),a.find(".prices-for-all").removeClass("hide"),a.find(".prices-for-all select").removeAttr("disabled","disabled"))};$('select[name="status"]').change(function(e){var a=$(this).val(),r=$(this).parents("form");fave_property_status_changed(a,r)});var selected_status_header_search=$('select[name="status"]').val();if(selected_status_header_search==HOUZEZ_ajaxcalls_vars.for_rent||""==selected_status_header_search||null==selected_status_header_search){var $form=$(".advanced-search, .widget_houzez_advanced_search");fave_property_status_changed(selected_status_header_search,$form)}$(".advanced-search-mobile #selected_status_mobile").change(function(e){var a=$(this).val(),r=$(this).parents("form");fave_property_status_changed(a,r)});var selected_status_header_search=$(".advanced-search-mobile #selected_status_mobile").val();if(selected_status_header_search==HOUZEZ_ajaxcalls_vars.for_rent||""==selected_status_header_search){var $form=$(".advanced-search-mobile");fave_property_status_changed(selected_status_header_search,$form)}$(".advanced-search-module #selected_status_module").change(function(e){var a=$(this).val(),r=$(this).parents("form");fave_property_status_changed(a,r)});var selected_status_module_search=$(".advanced-search-module #selected_status_module").val();if(selected_status_module_search==HOUZEZ_ajaxcalls_vars.for_rent||""==selected_status_module_search){var $form=$(".advanced-search-module");fave_property_status_changed(selected_status_module_search,$form)}$("#save_search_click").click(function(e){e.preventDefault();var $this=$(this),$from=$(".save_search_form");0===parseInt(userID,10)?$("#pop-login").modal("show"):$.ajax({url:ajaxurl,data:$from.serialize(),method:$from.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success&&$("#save_search_click").addClass("saved")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$(".remove-search").click(function(e){e.preventDefault();var $this=$(this),prop_id=$this.data("propertyid"),removeBlock=$this.parents(".saved-search-block");confirm(confirm_message)&&$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"houzez_delete_search",property_id:prop_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="'+process_loader_spinner+'"></i>')},success:function(e){e.success&&removeBlock.remove()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$(".agent_contact_form").click(function(e){e.preventDefault();var $this=$(this),$form=$this.parents("form"),$result=$form.find(".form_messages");$.ajax({url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($result.empty().append(e.msg),$form.find("input").val(""),$form.find("textarea").val("")):($result.empty().append(e.msg),$this.children("i").removeClass(process_loader_spinner)),1==houzez_reCaptcha&&houzezReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),$this.children("i").addClass(success_icon)}})}),$("#agent_detail_contact_btn").click(function(e){e.preventDefault();var current_element=$(this),$this=$(this),$form=$this.parents("form");jQuery.ajax({type:"post",url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){current_element.children("i").remove(),current_element.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){current_element.children("i").removeClass(process_loader_spinner),e.success?($("#form_messages").empty().append(e.msg),current_element.children("i").addClass(success_icon)):$("#form_messages").empty().append(e.msg),1==houzez_reCaptcha&&houzezReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$(".schedule_contact_form").click(function(e){e.preventDefault();var $this=$(this),$form=$this.parents("form"),$result=$form.find(".form_messages");$.ajax({url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($result.empty().append(e.msg),$form.find("input").val(""),$form.find("textarea").val("")):$result.empty().append(e.msg)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),$this.children("i").addClass(success_icon)}})}),$(".resend-for-approval-perlisting").click(function(e){e.preventDefault();var a=$(this).attr("data-propid");resend_for_approval_perlisting(a,$(this)),$(this).unbind("click")});var resend_for_approval_perlisting=function(prop_id,currentDiv){$.ajax({type:"POST",url:ajaxurl,dataType:"JSON",data:{action:"houzez_resend_for_approval_perlisting",propid:prop_id},success:function(e){e.success?currentDiv.parent().empty().append('<span class="label-success label">'+e.msg+"</span>"):currentDiv.parent().empty().append('<div class="alert alert-danger">'+e.msg+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},houzez_init_add_favorite=function(){$(".add_fav").click(function(){var e=$(this).children("i"),a=$(this).attr("data-propid");add_to_favorite(a,e)})};houzez_init_add_favorite();var houzez_init_remove_favorite=function(){$(".remove_fav").click(function(){var e=$(this),a=$(this).attr("data-propid");add_to_favorite(a,e);e.parents(".item-wrap").remove()})};houzez_init_remove_favorite();var add_to_favorite=function(propID,curnt){0===parseInt(userID,10)?$("#pop-login").modal("show"):jQuery.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"houzez_add_to_favorite",property_id:propID},beforeSend:function(){curnt.addClass("faa-pulse animated")},success:function(e){e.added?curnt.removeClass("fa-heart-o").addClass("fa-heart"):curnt.removeClass("fa-heart").addClass("fa-heart-o"),curnt.removeClass("faa-pulse animated")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".fave-login-button").click(function(e){e.preventDefault();var a=$(this);houzez_login(a)}),$(".fave-register-button").click(function(e){e.preventDefault();var a=$(this);houzez_register(a)});var houzez_login=function(currnt){var $form=currnt.parents("form"),$messages=currnt.parents(".login-block").find(".houzez_messages");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?($messages.empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),"same_page"==login_redirect_type?window.location.reload():window.location.href=login_redirect):$messages.empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>"),1==houzez_reCaptcha&&houzezReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},houzez_register=function(currnt){var $form=currnt.parents("form"),$messages=currnt.parents(".class-for-register-msg").find(".houzez_messages_register");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?$messages.empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"):$messages.empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>"),1==houzez_reCaptcha&&houzezReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#houzez_forgetpass").click(function(){var user_login=$("#user_login_forgot").val(),security=$("#fave_resetpassword_security").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"houzez_reset_password",user_login:user_login,security:security},beforeSend:function(){$("#houzez_msg_reset").empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?$("#houzez_msg_reset").empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"):$("#houzez_msg_reset").empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),0<$("#houzez_reset_password").length&&$("#houzez_reset_password").click(function(e){e.preventDefault();var a=$(this),r=$('input[name="rp_login"]').val(),s=$('input[name="rp_key"]').val(),t=$('input[name="pass1"]').val(),o=$('input[name="pass2"]').val(),n=$('input[name="fave_resetpassword_security"]').val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"houzez_reset_password_2",rq_login:r,password:t,confirm_pass:o,rp_key:s,security:n},beforeSend:function(){a.children("i").remove(),a.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?(jQuery("#password_reset_msgs").empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+e.msg+"</p>"),jQuery("#oldpass, #newpass, #confirmpass").val("")):jQuery("#password_reset_msgs").empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>")},error:function(e){},complete:function(){a.children("i").removeClass(process_loader_spinner)}})}),$("#houzez_complete_order").click(function(e){var a,r,s,t,o,n;e.preventDefault(),r=$("input[name='houzez_payment_type']:checked").val(),o=$("input[name='featured_pay']").val(),n=$("input[name='is_upgrade']").val(),t=$("#houzez_property_id").val(),s=$("#houzez_listing_price").val(),"paypal"==r?(fave_processing_modal(paypal_connecting),fave_paypal_payment(t,o,n)):"stripe"==r?(a=$(this).parents("form"),"1"===o?a.find(".houzez_stripe_simple_featured button").trigger("click"):a.find(".houzez_stripe_simple button").trigger("click")):"direct_pay"==r&&(fave_processing_modal(direct_pay_text),direct_bank_transfer(t,s))});var fave_processing_modal=function(e){var a='<div class="modal fade" id="fave_modal" tabindex="-1" role="dialog" aria-labelledby="faveModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body houzez_messages_modal">'+e+"</div></div></div></div></div>";jQuery("body").append(a),jQuery("#fave_modal").modal()},fave_processing_modal_close=function(){jQuery("#fave_modal").modal("hide")},fave_paypal_payment=function(property_id,is_prop_featured,is_prop_upgrade){$.ajax({type:"post",url:ajaxurl,data:{action:"houzez_property_paypal_payment",prop_id:property_id,is_prop_featured:is_prop_featured,is_prop_upgrade:is_prop_upgrade},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},houzez_membership_data=function(e){var a=$("input[name='houzez_payment_type']:checked").val(),r=$("input[name='houzez_package_price']").val(),s=$("input[name='houzez_package_id']").val(),t=$("#houzez_package_name").text();if("paypal"==a)fave_processing_modal(paypal_connecting),$("#paypal_package_recurring").is(":checked")?houzez_recuring_paypal_package_payment(r,t,s):houzez_paypal_package_payment(r,t,s);else if("mollie"==a)fave_processing_modal(mollie_connecting),houzez_mollie_package_payment(r,t,s);else if("stripe"==a){e.parents("form").find(".houzez_stripe_membership button").trigger("click")}else"direct_pay"==a?(fave_processing_modal(direct_pay_text),direct_bank_transfer_package(s,r,t)):"2checkout"==a||(fave_processing_modal(direct_pay_text),houzez_free_membership_package(s));return!1},houzez_register_user_with_membership=function(currnt){var $form=currnt.parents("form"),$messages=currnt.parents(".class-for-register-msg").find(".houzez_messages_register");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?houzez_membership_data(currnt):$messages.empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+e.msg+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#houzez_complete_membership").click(function(e){e.preventDefault();var a=$(this);"no"!=houzez_logged_in?houzez_membership_data(a):houzez_register_user_with_membership(a)});var houzez_paypal_package_payment=function(houzez_package_price,houzez_package_name,houzez_package_id){$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_paypal_package_payment",houzez_package_price:houzez_package_price,houzez_package_name:houzez_package_name,houzez_package_id:houzez_package_id},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},houzez_recuring_paypal_package_payment=function(houzez_package_price,houzez_package_name,houzez_package_id){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_recuring_paypal_package_payment",houzez_package_name:houzez_package_name,houzez_package_id:houzez_package_id,houzez_package_price:houzez_package_price},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},houzez_mollie_package_payment=function(houzez_package_price,houzez_package_name,houzez_package_id){$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_mollie_package_payment",houzez_package_price:houzez_package_price,houzez_package_name:houzez_package_name,houzez_package_id:houzez_package_id},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},direct_bank_transfer_package=function(e,a,r){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_direct_pay_package",selected_package:e},success:function(e){window.location.href=e},error:function(e){}})},houzez_free_membership_package=function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_free_membership_package",selected_package:e},success:function(e){window.location.href=e},error:function(e){}})};$(".resend-for-approval").click(function(e){if(e.preventDefault(),confirm(confirm_relist)){var a=$(this).attr("data-propid");resend_for_approval(a,$(this)),$(this).unbind("click")}});var resend_for_approval=function(prop_id,currentDiv){$.ajax({type:"POST",url:ajaxurl,dataType:"JSON",data:{action:"houzez_resend_for_approval",propid:prop_id},success:function(e){if(e.success){currentDiv.parent().empty().append('<span class="label-success label">'+e.msg+"</span>");var a=parseInt(jQuery(".listings_remainings").text(),10);jQuery(".listings_remainings").text(a-1)}else currentDiv.parent().empty().append('<div class="alert alert-danger">'+e.msg+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".make-prop-featured").click(function(e){if(e.preventDefault(),confirm(confirm_featured)){var a=$(this).attr("data-propid"),r=$(this).attr("data-proptype");make_prop_featured(a,$(this),r),$(this).unbind("click")}});var make_prop_featured=function(prop_id,currentDiv,prop_type){$.ajax({type:"POST",url:ajaxurl,dataType:"JSON",data:{action:"houzez_make_prop_featured",propid:prop_id,prop_type:prop_type},success:function(e){if(e.success){currentDiv.parents(".item-wrap").find(".item-thumb").append('<span class="label-featured label">'+fave_prop_featured+"</span>"),currentDiv.remove(),window.location.reload();var a=parseInt(jQuery(".featured_listings_remaining").text(),10);jQuery(".featured_listings_remaining").text(a-1)}else currentDiv.parent().empty().append('<div class="alert alert-danger">'+featured_listings_none+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".remove-prop-featured").click(function(e){if(e.preventDefault(),confirm(confirm_featured_remove)){var a=$(this).attr("data-propid");remove_prop_featured(a,$(this)),$(this).unbind("click")}});var remove_prop_featured=function(prop_id,currentDiv){$.ajax({type:"POST",url:ajaxurl,dataType:"JSON",data:{action:"houzez_remove_prop_featured",propid:prop_id},success:function(e){e.success&&(currentDiv.parents(".item-wrap").find(".label-featured").remove(),currentDiv.remove(),window.location.reload())},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},direct_bank_transfer=function(e,a){var r=$('input[name="featured_pay"]').val(),s=$('input[name="is_upgrade"]').val();jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_direct_pay_per_listing",prop_id:e,is_featured:r,is_upgrade:s},success:function(e){window.location.href=e},error:function(e){}})};$(".yahoo-login").click(function(){var e=$(this);houzez_login_via_yahoo(e)});var houzez_login_via_yahoo=function(current){var $form=current.parents("form"),$messages=current.parents(".login-block").find(".houzez_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_yahoo_login"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".google-login").click(function(){var e=$(this);houzez_login_via_google(e)});var houzez_login_via_google=function(current){var $form=current.parents("form"),$messages=current.parents(".login-block").find(".houzez_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_google_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".facebook-login").click(function(){var e=$(this);houzez_login_via_facebook(e)});var houzez_login_via_facebook=function(current){var $form=current.parents("form"),$messages=current.parents(".login-block").find(".houzez_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_facebook_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#invoice_status, #invoice_type").change(function(){houzez_invoices_filter()}),$("#startDate, #endDate").focusout(function(){houzez_invoices_filter()});var houzez_invoices_filter=function(){var inv_status=$("#invoice_status").val(),inv_type=$("#invoice_type").val(),startDate=$("#startDate").val(),endDate=$("#endDate").val();$.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{action:"houzez_invoices_ajax_search",invoice_status:inv_status,invoice_type:inv_type,startDate:startDate,endDate:endDate},success:function(e){e.success&&($("#invoices_content").empty().append(e.result),$("#invoices_total_price").empty().append(e.total_price))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},houzezAddMarkers=function(e,d){if(1==marker_spiderfier)var u=new OverlappingMarkerSpiderfier(d,{markersWontMove:!0,markersWontHide:!0,keepSpiderfied:!0,circleSpiralSwitchover:1/0,nearbyDistance:50});$.each(e,function(e,a){var r=new google.maps.LatLng(a.lat,a.lng),s=a.data?a.data.post_title:a.title;if("yes"==markerPricePins)var t='<div data-id="'+a.id+'" class="gm-marker gm-marker-color-'+a.term_id+'"><div class="gm-marker-price">'+a.pricePin+"</div></div>",o=new RichMarker({map:d,position:r,draggable:!1,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:t});else{var n=a.icon,i=new google.maps.Size(44,56);1.5<window.devicePixelRatio&&a.retinaIcon&&(n=a.retinaIcon,i=new google.maps.Size(44,56));var l={url:n,size:i,scaledSize:new google.maps.Size(44,56)};o=new google.maps.Marker({position:r,map:d,icon:l,draggable:!1,title:s.replace(/\&[\w\d\#]{2,5}\;/g,function(e){return special_chars[e]}),animation:google.maps.Animation.DROP})}var c=a.prop_meta;null==c&&(c="");var p,_=document.createElement("div");_.className="property-item item-grid map-info-box google-map-info-window",_.innerHTML='<div class="figure-block"><figure class="item-thumb"><div class="price hide-on-list"><span class="item-price">'+a.price+'</span></div><a href="'+a.url+'" class="hover-effect" tabindex="0">'+a.thumbnail+'</a></figure></div><div class="item-body"><div class="body-left"><div class="info-row"><h2><a href="'+a.url+'">'+s+"</a></h2><h4>"+a.address+'</h4></div><div class="table-list full-width info-row"><div class="cell"><div class="info-row amenities">'+c+"<p>"+a.type+"</p></div></div></div></div></div>",google.maps.event.addListener(o,"click",(p=o,function(){infobox.setContent(_),infobox.open(d,p)})),1==marker_spiderfier&&u.addMarker(o),markers.push(o)})},houzez_osm_markers=function(e,p){for(var _,a=[],r=0;r<e.length;r++)e[r].lat&&e[r].lng&&a.push([e[r].lat,e[r].lng]);1<a.length&&p.fitBounds(a),1==is_marker_cluster&&(osm_markers_cluster=new L.MarkerClusterGroup({iconCreateFunction:function(e){var a='<div class="houzez-osm-cluster">'+e.getAllChildMarkers().length+"</div>";return L.divIcon({html:a,className:"mycluster",iconSize:L.point(47,47)})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0})),$.each(e,function(e,a){var r=L.latLng(a.lat,a.lng),s=a.data?a.data.post_title:a.title;if("yes"==markerPricePins){var t='<div data-id="'+a.id+'" class="gm-marker gm-marker-color-'+a.term_id+'"><div class="gm-marker-price">'+a.pricePin+"</div></div>",o=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:t});_=1==is_marker_cluster?new L.Marker(r,{icon:o}):L.marker(r,{icon:o}).addTo(p)}else{var n={riseOnHover:!0};if(""!=s&&(n.title=s.replace(/\&[\w\d\#]{2,5}\;/g,function(e){return special_chars[e]})),a.icon){var i={iconUrl:a.icon,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};a.retinaIcon&&(i.iconRetinaUrl=a.retinaIcon),n.icon=L.icon(i)}_=1==is_marker_cluster?new L.Marker(r,n):L.marker(r,n).addTo(p)}1==is_marker_cluster&&osm_markers_cluster.addLayer(_);var l=a.prop_meta;null==l&&(l="");var c=document.createElement("div");c.className="property-item item-grid map-info-box osm-info-window",c.innerHTML='<div class="figure-block"><figure class="item-thumb"><div class="price hide-on-list"><span class="item-price">'+a.price+'</span></div><a href="'+a.url+'" class="hover-effect" tabindex="0">'+a.thumbnail+'</a></figure></div><div class="item-body"><div class="body-left"><div class="info-row"><h2><a href="'+a.url+'">'+s+"</a></h2><h4>"+a.address+'</h4></div><div class="table-list full-width info-row"><div class="cell"><div class="info-row amenities">'+l+"<p>"+a.type+"</p></div></div></div></div></div>",markers.push(_),_.bindPopup(c)}),1==is_marker_cluster&&p.addLayer(osm_markers_cluster)},houzez_osm_marker_simple=function(e,n){$.each(e,function(e,a){var r=L.latLng(a.lat,a.lng),s=a.data?a.data.post_title:a.title,t={riseOnHover:!0};if(""!=s&&(t.title=s),a.icon){var o={iconUrl:a.icon,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};a.retinaIcon&&(o.iconRetinaUrl=a.retinaIcon),t.icon=L.icon(o)}L.marker(r,t).addTo(n)})},reloadOSMMarkers=function(){for(var e=0;e<markers.length;e++)houzezOSM.removeLayer(markers[e]);markers=[],osm_markers_cluster&&houzezOSM.removeLayer(osm_markers_cluster)},houzezAddMarkerSimple=function(e,c){$.each(e,function(e,a){var r=new google.maps.LatLng(a.lat,a.lng),s=a.data?a.data.post_title:a.title,t=a.icon,o=new google.maps.Size(44,56);if(1.5<window.devicePixelRatio&&a.retinaIcon&&(t=a.retinaIcon,o=new google.maps.Size(44,56)),"yes"==markerPricePins)var n='<div class="gm-marker gm-marker-color-'+a.term_id+'"><div class="gm-marker-price">'+a.pricePin+"</div></div>",i=new RichMarker({map:c,position:r,draggable:!0,flat:!0,anchor:RichMarkerPosition.MIDDLE,content:n});else{var l={url:t,size:o,scaledSize:new google.maps.Size(44,56)};i=new google.maps.Marker({position:r,map:c,icon:l,draggable:!1,title:s,animation:google.maps.Animation.DROP})}markers.push(i)})},houzez_map_zoomin=function(a){google.maps.event.addDomListener(document.getElementById("listing-mapzoomin"),"click",function(){var e=parseInt(a.getZoom(),10);console.log(e),20<++e&&(e=20),console.log("=="+e+" ++ "),a.setZoom(e)})},houzez_map_zoomout=function(a){google.maps.event.addDomListener(document.getElementById("listing-mapzoomout"),"click",function(){var e=parseInt(a.getZoom(),10);console.log(e),--e<0&&(e=0),console.log("=="+e+" -- "),a.setZoom(e)})},houzez_map_zoomin_osm=function(a){$("#listing-mapzoomin").on("click",function(){var e=parseInt(a.getZoom(),10);console.log(e),20<++e&&(e=20),console.log("=="+e+" ++ "),a.setZoom(e)})},houzez_map_zoomout_osm=function(a){$("#listing-mapzoomout").on("click",function(){var e=parseInt(a.getZoom(),10);console.log(e),--e<0&&(e=0),console.log("=="+e+" -- "),a.setZoom(e)})};document.getElementById("listing-mapzoomin")&&("osm"!=houzez_map_system?houzez_map_zoomin(houzezMap):houzez_map_zoomin_osm(houzezOSM)),document.getElementById("listing-mapzoomout")&&("osm"!=houzez_map_system?houzez_map_zoomout(houzezMap):houzez_map_zoomout_osm(houzezOSM));var houzez_change_map_type=function(e){return"roadmap"===e?houzezMap.setMapTypeId(google.maps.MapTypeId.ROADMAP):"satellite"===e?houzezMap.setMapTypeId(google.maps.MapTypeId.SATELLITE):"hybrid"===e?houzezMap.setMapTypeId(google.maps.MapTypeId.HYBRID):"terrain"===e&&houzezMap.setMapTypeId(google.maps.MapTypeId.TERRAIN),!1};$(".houzezMapType").on("click",function(){var e=$(this).data("maptype");houzez_change_map_type(e)});var houzez_map_next=function(e){for(++current_marker>markers.length&&(current_marker=1);!1===markers[current_marker-1].visible;)++current_marker>markers.length&&(current_marker=1);e.getZoom()<15&&e.setZoom(15),console.log(current_marker-1),"google"==houzez_map_system?google.maps.event.trigger(markers[current_marker-1],"click"):(e.setView(markers[current_marker-1].getLatLng()),markers[current_marker-1]._icon||markers[current_marker-1].__parent.spiderfy(),e.setZoom(20),current_marker-1==0||current_marker-1==markers.length?setTimeout(function(){markers[current_marker-1].fire("click")},500):markers[current_marker-1].fire("click"))},houzez_map_prev=function(e){for(--current_marker<1&&(current_marker=markers.length);!1===markers[current_marker-1].visible;)--current_marker>markers.length&&(current_marker=1);e.getZoom()<15&&e.setZoom(15),console.log(current_marker-1),"google"==houzez_map_system?google.maps.event.trigger(markers[current_marker-1],"click"):(e.setView(markers[current_marker-1].getLatLng()),markers[current_marker-1]._icon||markers[current_marker-1].__parent.spiderfy(),e.setZoom(20),current_marker-1==0||current_marker==markers.length?setTimeout(function(){markers[current_marker-1].fire("click")},500):markers[current_marker-1].fire("click"))};$("#houzez-gmap-next").on("click",function(){houzez_map_next("google"==houzez_map_system?houzezMap:houzezOSM)}),$("#houzez-gmap-prev").on("click",function(){houzez_map_prev("google"==houzez_map_system?houzezMap:houzezOSM)});var houzez_map_search_field=function(e){var a=new google.maps.places.SearchBox(e);houzezMap.controls[google.maps.ControlPosition.TOP_LEFT].push(e),houzezMap.addListener("bounds_changed",function(){a.setBounds(houzezMap.getBounds())});var s=[];a.addListener("places_changed",function(){var e=a.getPlaces();if(0!=e.length){s.forEach(function(e){e.setMap(null)}),s=[];var r=new google.maps.LatLngBounds;e.forEach(function(e){var a={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};s.push(new google.maps.Marker({map:houzezMap,icon:a,title:e.name,position:e.geometry.location})),e.geometry.viewport?r.union(e.geometry.viewport):r.extend(e.geometry.location)}),houzezMap.fitBounds(r)}})};if(document.getElementById("google-map-search")){var mapInput=document.getElementById("google-map-search");"google"==houzez_map_system&&houzez_map_search_field(mapInput)}var reloadMarkers=function(){for(var e=0;e<markers.length;e++)markers[e].setMap(null);markers=[]},houzezGeoLocation=function(s){var e=!0;window.chrome&&window.chrome.webstore&&"http:"===document.location.protocol&&0!=ipinfo_location&&(e=!1),e?navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var r={lat:e.coords.latitude,lng:e.coords.longitude};(new google.maps.Geocoder).geocode({location:r},function(e,a){if("OK"===a)if(e[1]){console.log(e[1]);new google.maps.Marker({position:r,map:s})}else window.alert("No results found");else window.alert("Geocoder failed due to: "+a)});var a=new google.maps.Circle({radius:2e3,center:r,map:s,fillColor:houzez_primary_color,fillOpacity:.1,strokeColor:houzez_primary_color,strokeOpacity:.3});s.fitBounds(a.getBounds())},function(){handleLocationError(!0,s,s.getCenter())}):$.getJSON("http://ipinfo.io",function(e){var a={lat:1*(a=(a=e.loc).split(","))[0],lng:1*a[1]},r=new google.maps.Circle({radius:1e3,center:a,map:s,icon:clusterIcon,fillColor:houzez_primary_color,fillOpacity:.2,strokeColor:houzez_primary_color,strokeOpacity:.6});s.fitBounds(r.getBounds());new google.maps.Marker({position:a,animation:google.maps.Animation.DROP,map:s});s.setCenter(a)})};document.getElementById("houzez-gmap-location")&&google.maps.event.addDomListener(document.getElementById("houzez-gmap-location"),"click",function(){houzezGeoLocation(houzezMap)});var houzezLatLng=function(e){(new google.maps.Geocoder).geocode({address:e},function(e,a){if("OK"==a)return e[0].geometry.location})},half_map_ajax_pagi=function(){return $(".half_map_ajax_pagi a").click(function(e){e.preventDefault();var a=$(this).data("houzepagi"),r=$("form#half_map_search_form"),s=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(r,s,a)}),!1},houzez_header_listing_map=function(e,a,r,s,t,o,n,i,l,c,p,_,d,u,m,h,g,v,f,z,y,x,k,w){var b=$("#securityHouzezHeaderMap").val(),Z=HOUZEZ_ajaxcalls_vars.header_map_selected_city;$(".map-notfound").remove(),$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"houzez_header_map_listings",initial_city:Z,keyword:e,country:a,state:r,location:s,area:t,status:o,type:n,label:i,property_id:l,bedrooms:c,bathrooms:p,min_price:_,max_price:d,currency:k,min_area:u,max_area:m,features:h,publish_date:g,search_lat:v,search_long:f,use_radius:x,search_location:y,search_radius:z,custom_fields_values:w,security:b},beforeSend:function(){$("#houzez-map-loading").show()},success:function(e){"google"==houzez_map_system&&(remove_map_loader(),houzez_map_parallax()),!0===e.getProperties?("osm"==houzez_map_system?(reloadOSMMarkers(),houzez_osm_markers(e.properties,houzezOSM)):(reloadMarkers(),houzezAddMarkers(e.properties,houzezMap),houzez_map_bounds(),1==is_marker_cluster&&houzez_markerCluster()),$("#houzez-map-loading").hide()):("osm"==houzez_map_system?reloadOSMMarkers():reloadMarkers(),$("#houzez-listing-map").append('<div class="map-notfound">'+not_found+"</div>"))},error:function(e,a,r){console.log(e.status),console.log(e.responseText),console.log(r)}})},houzez_half_map_listings=function(e,a,r,s,t,o,n,i,l,c,p,_,d,u,m,h,g,v,f,z,y,x,k,w,b,Z,O){var j=$("#securityHouzezHeaderMap").val(),M=$("#houzez_ajax_container"),C=$(".map-module-half .tabs-title span");return null!=O&&(paged=O),$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"houzez_half_map_listings",keyword:e,location:s,country:a,state:r,area:t,status:o,type:n,label:i,property_id:l,bedrooms:c,bathrooms:p,min_price:_,max_price:d,currency:w,min_area:u,max_area:m,features:h,publish_date:g,search_lat:f,search_long:z,use_radius:k,search_location:x,search_radius:y,sort_half_map:Z,custom_fields_values:b,security:j,paged:paged,post_per_page:v},beforeSend:function(){$("#houzez-map-loading").show(),M.empty().append('<div class="list-loading"><div class="list-loading-bar"></div><div class="list-loading-bar"></div><div class="list-loading-bar"></div><div class="list-loading-bar"></div></div>')},success:function(e){return""!=e.query&&$('input[name="search_args"]').val(e.query),$(".map-notfound").remove(),"google"==houzez_map_system&&remove_map_loader(),!0===e.getProperties?(M.empty().html(e.propHtml),C.empty().html(e.total_results),half_map_ajax_pagi(),"osm"==houzez_map_system?(reloadOSMMarkers(),houzez_osm_markers(e.properties,houzezOSM)):(reloadMarkers(),houzezAddMarkers(e.properties,houzezMap),houzez_map_bounds(),1==is_marker_cluster&&houzez_markerCluster(),houzez_is_mobile||houzez_infobox_trigger()),houzez_init_add_favorite(),houzez_init_remove_favorite(),$('[data-toggle="tooltip"]').tooltip(),1==has_compare&&houzez_compare_listing(),$("#houzez-map-loading").hide()):("osm"==houzez_map_system?reloadOSMMarkers():reloadMarkers(),$("#mapViewHalfListings").append('<div class="map-notfound">'+not_found+"</div>"),M.empty().html('<div class="map-notfound">'+not_found+"</div>"),C.empty().html(e.total_results)),!1},error:function(e,a,r){console.log(e.status),console.log(e.responseText),console.log(r)}}),!1},houzez_search_on_change=function(r,e,a,s,t,o,n,i){var l,c,p,_,d,u,m,h,g,v,f,z,y,x,k,w,b,Z,O,j,M,C,H;y=null!=s&&null!=t?(z=s,t):e.hasClass("widget")||0!=advanced_search_price_slide?(z=r.find('input[name="min-price"]').val(),r.find('input[name="max-price"]').val()):(z=r.find('select[name="min-price"]:not(:disabled)').val(),r.find('select[name="max-price"]:not(:disabled)').val()),p=r.find('select[name="state"]').val(),""!=(_=r.find('select[name="location"]').val())&&null!=_&&void 0!==_||(_="all"),"yes"!=o&&(d=r.find('select[name="area"]').val()),"yes"==n&&(d="",_="all"),"yes"==i&&(d=p="",_="all"),l=r.find('select[name="country"]').val(),c=r.find('select[name="currency"]').val(),u=r.find('select[name="status"]').val(),m=r.find('select[name="type"]').val(),v=r.find('select[name="bedrooms"]').val(),f=r.find('select[name="bathrooms"]').val(),h=r.find('select[name="label"]').val(),g=r.find('input[name="property_id"]').val(),x=r.find('input[name="min-area"]').val(),k=r.find('input[name="max-area"]').val(),w=r.find('input[name="keyword"]').val(),b=r.find('input[name="publish_date"]').val(),H=r.find(".features-list input[type=checkbox]:checked").map(function(e,a){return $(a).val()}).toArray(),Z=r.find('input[name="lat"]').val(),O=r.find('input[name="lng"]').val(),M=r.find('input[name="search_location"]').val(),j="template/property-listings-map.php"==current_tempalte?r.find('input[name="search_radius"]').val():r.find('select[name="radius"]').val(),C=$(r.find('input[name="use_radius"]')).is(":checked")?"on":"off";var E=[];if($.each(search_custom_fields,function(e,a){E.push(r.find("."+e).val())}),0!=is_marker_cluster&&null!=markerCluster&&markerCluster.clearMarkers(),"template/property-listings-map.php"==current_tempalte){var S=$("#houzez_sort_half_map").val();houzez_half_map_listings(w,l,p,_,d,u,m,h,g,v,f,z,y,x,k,H,b,search_no_posts,Z,O,j,M,C,c,E,S,a)}else houzez_header_listing_map(w,l,p,_,d,u,m,h,g,v,f,z,y,x,k,H,b,Z,O,j,M,C,c,E);return!1},populate_state_dropdown=function(e,a){var r;""!=(r=e.find('select[name="country"] option:selected').val())&&null!=r?("houzez_on_load"!=a&&e.find('select[name="location"], select[name="area"], select[name="state"]').selectpicker("val",""),e.find('select[name="state"] option').each(function(){var e=$(this).data("parentcountry");void 0!==e&&(e=e.toUpperCase()),""!=$(this).val()&&$(this).css("display","none"),e==r&&$(this).css("display","block")})):"houzez_on_load"==a||(e.find('select[name="location"], select[name="area"], select[name="state"]').selectpicker("val",""),e.find('select[name="state"] option').each(function(){$(this).css("display","block")}),e.find('select[name="area"] option').each(function(){$(this).css("display","block")})),e.find('select[name="location"], select[name="area"], select[name="state"]').selectpicker("refresh")},populate_city_dropdown=function(e,a){var r;""!=(r=e.find('select[name="state"] option:selected').val())&&null!=r?("houzez_on_load"!=a&&e.find('select[name="location"], select[name="area"]').selectpicker("val",""),e.find('select[name="location"] option').each(function(){var e=$(this).data("parentstate");""!=$(this).val()&&$(this).css("display","none"),e==r&&$(this).css("display","block")})):"houzez_on_load"==a||(e.find('select[name="location"], select[name="area"]').selectpicker("val",""),e.find('select[name="location"] option').each(function(){$(this).css("display","block")}),e.find('select[name="area"] option').each(function(){$(this).css("display","block")})),e.find('select[name="location"], select[name="area"]').selectpicker("refresh")},populate_area_dropdown=function(e,a){var r;""!=(r=e.find('select[name="location"] option:selected').val())&&null!=r?("houzez_on_load"!=a&&e.find('select[name="area"]').selectpicker("val",""),e.find('select[name="area"] option').each(function(){var e=$(this).data("parentcity");""!=$(this).val()&&$(this).css("display","none"),e==r&&$(this).css("display","block")})):(e.find('select[name="area"]').selectpicker("val",""),e.find('select[name="area"] option').each(function(){$(this).css("display","block")})),e.find('select[name="area"]').selectpicker("refresh")},select_areas_on_load=$(".advance-search-header, .map-module-half, .widget_houzez_advanced_search").find("form");if(populate_area_dropdown(select_areas_on_load,"houzez_on_load"),populate_city_dropdown(select_areas_on_load,"houzez_on_load"),populate_state_dropdown(select_areas_on_load,"houzez_on_load"),0<$("#houzez-listing-map").length||0<$("#mapViewHalfListings").length){$.each(search_custom_fields,function(e,a){$("."+e).on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(e,a,current_page)}),console.log(e+" : "+a)});var current_page=0;if($('select[name="sort_half_map"], select[name="currency"], select[name="area"], select[name="label"], select[name="bedrooms"], select[name="bathrooms"], select[name="min-price"], select[name="max-price"], input[name="min-price"], input[name="max-price"], input[name="min-area"], input[name="max-area"], select[name="type"], input[name="property_id"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(e,a,current_page)}),$('input[name="keyword"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");setTimeout(function(){houzez_search_on_change(e,a,current_page)},100)}),"google"==houzez_map_system&&$("input.search_location").geocomplete({details:"form",country:houzez_geocomplete_country,geocodeAfterResult:!0}).bind("geocode:result",function(e,a){var r=$(this).parents("form"),s=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(r,s,current_page),console.log(a)}),$("#half_map_update").on("click",function(e){e.preventDefault();var a=$(this).parents("form"),r=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(a,r,current_page)}),$('select[name="radius"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(e,a,current_page)}),$('select[name="country"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(e,a,current_page,"","","","","yes"),populate_state_dropdown(e)}),$('select[name="state"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(e,a,current_page,"","","","yes"),populate_city_dropdown(e)}),$('select[name="location"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(e,a,current_page,"","","yes"),populate_area_dropdown(e)}),$('input[name="feature[]"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(e,a,current_page)}),$(".search-date").on("change",function(e){var a=$(this).parents("form"),r=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(a,r,current_page)}),$('select[name="status"]').on("change",function(){var e=$(this).parents("form"),a=$(this).parents(".widget_houzez_advanced_search");$(this).val()==rent_status_for_price_range?0!=advanced_search_price_slide?houzez_search_on_change(e,a,current_page,advanced_search_price_range_min_rent,advanced_search_price_range_max_rent):houzez_search_on_change(e,a,current_page):0!=advanced_search_price_slide?houzez_search_on_change(e,a,current_page,advanced_search_price_range_min,advanced_search_price_range_max):houzez_search_on_change(e,a,current_page)}),"template/property-listings-map.php"==current_tempalte){var sort_by=HOUZEZ_ajaxcalls_vars.sort_by,state=HOUZEZ_ajaxcalls_vars.search_state,country=HOUZEZ_ajaxcalls_vars.search_country,keyword=HOUZEZ_ajaxcalls_vars.search_keyword,location=HOUZEZ_ajaxcalls_vars.search_city,features=HOUZEZ_ajaxcalls_vars.search_feature,area=HOUZEZ_ajaxcalls_vars.search_area,status=HOUZEZ_ajaxcalls_vars.search_status,type=HOUZEZ_ajaxcalls_vars.search_type,label=HOUZEZ_ajaxcalls_vars.search_label,property_id=HOUZEZ_ajaxcalls_vars.search_property_id,bedrooms=HOUZEZ_ajaxcalls_vars.search_bedrooms,bathrooms=HOUZEZ_ajaxcalls_vars.search_bathrooms,min_price=HOUZEZ_ajaxcalls_vars.search_min_price,max_price=HOUZEZ_ajaxcalls_vars.search_max_price,currency=HOUZEZ_ajaxcalls_vars.search_currency,min_area=HOUZEZ_ajaxcalls_vars.search_min_area,max_area=HOUZEZ_ajaxcalls_vars.search_max_area,publish_date=HOUZEZ_ajaxcalls_vars.search_publish_date,search_no_posts=HOUZEZ_ajaxcalls_vars.search_no_posts,search_lat=HOUZEZ_ajaxcalls_vars.search_lat,search_long=HOUZEZ_ajaxcalls_vars.search_long,search_radius=HOUZEZ_ajaxcalls_vars.search_radius,search_location=HOUZEZ_ajaxcalls_vars.search_location,use_radius=HOUZEZ_ajaxcalls_vars.use_radius,custom_fields_array=[];$.each(search_custom_fields,function(e,a){custom_fields_array.push(a)}),houzez_half_map_listings(keyword,country,state,location,area,status,type,label,property_id,bedrooms,bathrooms,min_price,max_price,min_area,max_area,features,publish_date,search_no_posts,search_lat,search_long,search_radius,search_location,use_radius,currency,custom_fields_array,sort_by)}else houzez_header_listing_map()}else $('select[name="country"]').on("change",function(){var e=$(this).parents("form");populate_state_dropdown(e)}),$('select[name="location"]').on("change",function(){var e=$(this).parents("form");populate_area_dropdown(e)}),$('select[name="state"]').on("change",function(){var e=$(this).parents("form");populate_city_dropdown(e)}),"google"==houzez_map_system&&0<$("input.search_location").length&&$("input.search_location").geocomplete({details:"form",country:houzez_geocomplete_country,geocodeAfterResult:!0});"osm"==houzez_map_system&&0<$("input.search_location").length&&jQuery("input.search_location").autocomplete({source:function(e,a){jQuery.get("https://nominatim.openstreetmap.org/search",{format:"json",q:e.term},function(e){e.length?a(e.map(function(e){return{label:e.display_name,latitude:e.lat,longitude:e.lon,value:e.display_name}})):a([{value:"",label:"there are no results"}])},"json")},select:function(e,a){if($('input[name="lat"]').val(a.item.latitude),$('input[name="lng"]').val(a.item.longitude),0<$("#houzez-listing-map").length||0<$("#mapViewHalfListings").length){var r=$(this).parents("form"),s=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(r,s,current_page)}}});var price_range_main_search=function(e,a){if($(".price-range-advanced").slider({range:!0,min:e,max:a,values:[e,a],slide:function(e,a){if("after"==currency_position)var r=addCommas(a.values[0])+currency_symb,s=addCommas(a.values[1])+currency_symb;else r=currency_symb+addCommas(a.values[0]),s=currency_symb+addCommas(a.values[1]);$(".min-price-range-hidden").val(r),$(".max-price-range-hidden").val(s),$(".min-price-range").text(r),$(".max-price-range").text(s)},stop:function(e,a){if(0<$("#houzez-listing-map").length||0<$("#mapViewHalfListings").length){var r=$(this).parents("form"),s=$(this).parents("form");houzez_search_on_change(r,s,0)}}}),"after"==currency_position)var r=addCommas($(".price-range-advanced").slider("values",0))+currency_symb,s=addCommas($(".price-range-advanced").slider("values",1))+currency_symb;else r=currency_symb+addCommas($(".price-range-advanced").slider("values",0)),s=currency_symb+addCommas($(".price-range-advanced").slider("values",1));$(".min-price-range-hidden").val(r),$(".max-price-range-hidden").val(s),$(".min-price-range").text(r),$(".max-price-range").text(s)};0<$(".price-range-advanced").length&&price_range_main_search(advanced_search_price_range_min,advanced_search_price_range_max),$('.houzez-adv-price-range select[name="status"]').on("change",function(){$(this).val()==rent_status_for_price_range?price_range_main_search(advanced_search_price_range_min_rent,advanced_search_price_range_max_rent):price_range_main_search(advanced_search_price_range_min,advanced_search_price_range_max)});var selected_status_adv_search=$('.houzez-adv-price-range select[name="status"]').val();selected_status_adv_search==rent_status_for_price_range&&price_range_main_search(advanced_search_price_range_min_rent,advanced_search_price_range_max_rent);var price_range_widget=function(e,a){$("#slider-price").slider({range:!0,min:e,max:a,values:[e,a],slide:function(e,a){"after"==currency_position?($("#min-price").val(addCommas(a.values[0])+currency_symb),$("#max-price").val(addCommas(a.values[1])+currency_symb)):($("#min-price").val(currency_symb+addCommas(a.values[0])),$("#max-price").val(currency_symb+addCommas(a.values[1])))},stop:function(e,a){if(0<$("#houzez-listing-map").length){var r=$(this).parents("form"),s=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(r,s)}}}),"after"==currency_position?($("#min-price").val(addCommas($("#slider-price").slider("values",0))+currency_symb),$("#max-price").val(addCommas($("#slider-price").slider("values",1))+currency_symb)):($("#min-price").val(currency_symb+addCommas($("#slider-price").slider("values",0))),$("#max-price").val(currency_symb+addCommas($("#slider-price").slider("values",1))))};0<$("#slider-price").length&&price_range_widget(advanced_search_price_range_min,advanced_search_price_range_max),$("#widget_status").on("change",function(){$(this).val()==rent_status_for_price_range?price_range_widget(advanced_search_price_range_min_rent,advanced_search_price_range_max_rent):price_range_widget(advanced_search_price_range_min,advanced_search_price_range_max)});var selected_status_widget_search=$("#widget_status").val();selected_status_widget_search==rent_status_for_price_range&&price_range_widget(advanced_search_price_range_min_rent,advanced_search_price_range_max_rent),0<$("#slider-size").length&&($("#slider-size").slider({range:!0,min:advanced_search_widget_min_area,max:advanced_search_widget_max_area,values:[advanced_search_widget_min_area,advanced_search_widget_max_area],slide:function(e,a){$("#min-size").val(a.values[0]+" "+measurement_unit),$("#max-size").val(a.values[1]+" "+measurement_unit)},stop:function(e,a){if(0<$("#houzez-listing-map").length){var r=$(this).parents("form"),s=$(this).parents(".widget_houzez_advanced_search");houzez_search_on_change(r,s,0)}}}),$("#min-size").val($("#slider-size").slider("values",0)+" "+measurement_unit),$("#max-size").val($("#slider-size").slider("values",1)+" "+measurement_unit));var radius_search_slider=function(e){$("#radius-range-slider").slider({value:e,min:0,max:100,step:1,slide:function(e,a){$("#radius-range-text").html(a.value),$("#radius-range-value").val(a.value)},stop:function(e,a){if(0<$("#houzez-listing-map").length||0<$("#mapViewHalfListings").length){var r=$(this).parents("form"),s=$(this).parents("form");houzez_search_on_change(r,s,0)}}}),$("#radius-range-text").html($("#radius-range-slider").slider("value")),$("#radius-range-value").val($("#radius-range-slider").slider("value"))};0<$("#radius-range-slider").length&&radius_search_slider(houzez_default_radius);var houzez_infobox_trigger=function(){return $(".item-wrap").each(function(e){$(this).on("mouseenter",function(){houzezMap&&(houzezMap.getZoom()<15&&houzezMap.setZoom(15),google.maps.event.trigger(markers[e],"click"))}),$(this).on("mouseleave",function(){infobox.open(null,null)})}),!1},currencySwitcherList=$("#houzez-currency-switcher-list");0<currencySwitcherList.length&&($("#houzez-currency-switcher-list > li").click(function(e){e.stopPropagation(),currencySwitcherList.slideUp(200);var selectedCurrencyCode=$(this).data("currency-code");if(selectedCurrencyCode){$("#houzez-selected-currency span").html(selectedCurrencyCode),$("#houzez-switch-to-currency").val(selectedCurrencyCode);var security=$("#currency_switch_security").val(),houzez_switch_to_currency=$("#houzez-switch-to-currency").val();fave_processing_modal('<i class="'+process_loader_spinner+'"></i> '+currency_updating_msg),$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"houzez_currency_converter",currency_converter:houzez_switch_to_currency,security:security},success:function(e){e.success?window.location.reload():console.log(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}}),$("#houzez-selected-currency").click(function(e){currencySwitcherList.slideToggle(200),e.stopPropagation()}),$("html").click(function(){currencySwitcherList.slideUp(100)}));var areaSwitcherList=$("#houzez-area-switcher-list");if(0<areaSwitcherList.length&&($("#houzez-area-switcher-list > li").click(function(e){e.stopPropagation(),areaSwitcherList.slideUp(200);var selectedAreaCode=$(this).data("area-code"),houzez_switch_area_text=$("#houzez_switch_area_text").val();if(selectedAreaCode){$("#houzez-selected-area span").html(houzez_switch_area_text),$("#houzez-switch-to-area").val(selectedAreaCode);var security=$("#area_switch_security").val(),houzez_switch_to_area=$("#houzez-switch-to-area").val();fave_processing_modal('<i class="'+process_loader_spinner+'"></i> '+measurement_updating_msg),$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"houzez_switch_area",switch_to_area:houzez_switch_to_area,security:security},success:function(e){e.success?window.location.reload():console.log(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}}),$("#houzez-selected-area").click(function(e){areaSwitcherList.slideToggle(200),e.stopPropagation()}),$("html").click(function(){areaSwitcherList.slideUp(100)})),0!=keyword_autocomplete){var houzezAutoComplete=function(){var s=0,e=$(".auto-complete"),t=0;$('input[name="keyword"]').keyup(function(){var a=$(this).parents("form").find(".auto-complete"),e=$(this).val(),r=(e=$.trim(e)).length;2<=r&&r!=t?(t=r,a.fadeIn(),$.ajax({type:"POST",url:ajaxurl,data:{action:"houzez_get_auto_complete_search",key:e},beforeSend:function(){1==++s&&a.html('<div class="result"><p><i class="fa fa-spinner fa-spin fa-fw"></i> '+autosearch_text+"</p></div>")},success:function(e){0==--s&&(a.show(),""!=e&&a.empty().html(e).bind())},error:function(e){0==--s&&a.html('<div class="result"><p><i class="fa fa-spinner fa-spin fa-fw"></i> '+autosearch_text+" </p></div>")}})):r!=t&&a.fadeOut()}),e.on("click","li",function(){$('input[name="keyword"]').val($(this).data("text")),e.fadeOut()}).bind()};houzezAutoComplete()}$(".start_thread_form").click(function(e){e.preventDefault();var $this=$(this),$form=$this.parents("form"),$result=$form.find(".form_messages");$.ajax({url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){e.success?($result.empty().append(e.msg),$form.find("input").val(""),$form.find("textarea").val("")):$result.empty().append(e.msg)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),$this.children("i").addClass(success_icon)}})});var houzez_message_notifications=function(){$.ajax({url:ajaxurl,data:{action:"houzez_chcek_messages_notifications"},method:"POST",dataType:"JSON",beforeSend:function(){},success:function(e){e.success&&(e.notification?($(".user-alert").show(),$(".msg-alert").show()):($(".user-alert").hide(),$(".msg-alert").hide()))}})};$(document).ready(function(){houzez_message_notifications(),setInterval(function(){houzez_message_notifications()},18e4)}),$(".start_thread_message_form").click(function(e){e.preventDefault();var a=$(this),r=a.parents("form");r.find(".form_messages");$.ajax({url:ajaxurl,data:r.serialize(),method:r.attr("method"),dataType:"JSON",beforeSend:function(){a.children("i").remove(),a.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){window.location.replace(e.url)},complete:function(){a.children("i").removeClass(process_loader_spinner),a.children("i").addClass(success_icon)}})});var agency_listings_ajax_pagi=function(){return $("body.single-houzez_agency ul.pagination li a").click(function(e){e.preventDefault();var current_page=$(this).data("houzepagi"),agency_id_pagi=$("#agency_id_pagi").val(),ajax_container=$("#houzez_ajax_container");$.ajax({url:ajaxurl,method:"POST",data:{action:"houzez_ajax_agency_filter",paged:current_page,agency_id:agency_id_pagi},beforeSend:function(){ajax_container.empty().append('<div class="list-loading"><div class="list-loading-bar"></div><div class="list-loading-bar"></div><div class="list-loading-bar"></div><div class="list-loading-bar"></div></div>')},success:function(e){ajax_container.empty().html(e),agency_listings_ajax_pagi()},complete:function(){},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),!1};if(0<$("body.single-houzez_agency").length&&agency_listings_ajax_pagi(),$("a.delete-property").on("click",function(){if(1==confirm(delete_property_confirmation)){var e=$(this),a=e.data("id"),r=e.data("nonce");fave_processing_modal(delete_property_loading),$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"houzez_delete_property",prop_id:a,security:r},success:function(e){1==e.success?window.location.reload():(jQuery("#fave_modal").modal("hide"),alert(e.reason))},error:function(e){}})}}),"yes"==is_singular_property){var houzezSlidesToShow=0;houzezSlidesToShow="v3"==property_detail_top?"8":"11";var gallery_autoplay=HOUZEZ_ajaxcalls_vars.gallery_autoplay;gallery_autoplay="1"===gallery_autoplay;var detail_slider=$(".detail-slider"),detail_slider_nav=$(".detail-slider-nav"),slidesPerPage=4,syncedSecondary=!0,slider_speed=1200,houzez_detail_slider_main_settings=function(){return{stopOnHover:!0,items:1,rtl:houzez_rtl,margin:0,nav:!0,dots:!1,loop:!1,navText:["<i class='fa fa-angle-left'></i>","<i class='fa fa-angle-right'></i>"],autoplay:gallery_autoplay,autoplayHoverPause:!0,smartSpeed:slider_speed,autoplaySpeed:slider_speed,responsiveRefreshRate:200}},houzez_detail_slider_nav_settings=function(){return{margin:1,center:!1,nav:!1,rtl:houzez_rtl,dots:!1,loop:!1,navText:["<i class='fa fa-angle-left'></i>","<i class='fa fa-angle-right'></i>"],autoplay:!1,smartSpeed:800,autoplaySpeed:800,responsiveRefreshRate:10,responsive:{0:{items:5},767:{items:7},992:{items:9},1199:{items:houzezSlidesToShow}}}},property_detail_slideshow=function(){detail_slider.owlCarousel(houzez_detail_slider_main_settings()).on("changed.owl.carousel",function(e){var a=e.item.index;detail_slider_nav.find(".owl-item").removeClass("current").eq(a).addClass("current");var r=detail_slider_nav.find(".owl-item.active").length-1,s=detail_slider_nav.find(".owl-item.active").first().index(),t=detail_slider_nav.find(".owl-item.active").last().index();t<a&&detail_slider_nav.data("owl.carousel").to(a,100,!0);a<s&&detail_slider_nav.data("owl.carousel").to(a-r,100,!0)}),detail_slider_nav.on("initialized.owl.carousel",function(){detail_slider_nav.find(".owl-item").eq(0).addClass("current")}).owlCarousel(houzez_detail_slider_nav_settings()),detail_slider_nav.on("click",".owl-item",function(e){e.preventDefault();var a=$(this).index();detail_slider.data("owl.carousel").to(a,slider_speed,!0)})};property_detail_slideshow()}if("yes"==is_singular_property){$("#property-rating").rating({step:.5,showClear:!1}),$(".rating-display-only").rating({disabled:!0,showClear:!1}),$(".property_rating").click(function(e){e.preventDefault();var a=$(this),r=a.parents("form");r.find(".form_messages");$.ajax({url:ajaxurl,data:r.serialize(),method:r.attr("method"),dataType:"JSON",beforeSend:function(){a.children("i").remove(),a.prepend('<i class="fa-left '+process_loader_spinner+'"></i>')},success:function(e){window.location.reload()},complete:function(){a.children("i").removeClass(process_loader_spinner),a.children("i").addClass(success_icon)}})});var tabsHeight=function(){var e=$(".detail-media #gallery"),a=$(".detail-media .tab-content"),r=$("#singlePropertyMap,#street-map"),s=r.outerHeight(),t=e.outerHeight();a.outerHeight();e.is(":visible")?r.css("min-height",t):r.css("min-height",s)};if($(window).on("load",function(){tabsHeight()}),$(window).on("resize",function(){tabsHeight()}),0!=property_map)if("osm"==houzez_map_system){var mapCenter=L.latLng(prop_lat,prop_lng),mapDragging=!L.Browser.mobile,mapOptions={center:mapCenter,dragging:mapDragging,zoom:16,tap:!1};if(0<$("#singlePropertyMap").length){var singlePropMap=L.map("singlePropertyMap",mapOptions);singlePropMap.scrollWheelZoom.disable();var tileLayer=houzezOSMTileLayer();singlePropMap.addLayer(tileLayer);var propsSecurity=$("#securityHouzezMap").val();$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"houzez_get_single_property",prop_id:$("#prop_id").val(),security:propsSecurity},success:function(e){!0===e.getprops&&houzez_osm_markers(e.props,singlePropMap)},error:function(e){}}),$('a[href="#gallery"]').on("shown.bs.tab",function(){setTimeout(tabsHeight,500)}),$('a[href="#singlePropertyMap"]').on("shown.bs.tab",function(){singlePropMap.invalidateSize(),singlePropMap.panTo(singlePropMap.getCenter())})}else if(0<$("#singlePropertyMapSection").length){var singlePropMap=L.map("singlePropertyMapSection",mapOptions);singlePropMap.scrollWheelZoom.disable();var tileLayer=houzezOSMTileLayer();singlePropMap.addLayer(tileLayer);var propsSecurity=$("#securityHouzezMap").val();$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"houzez_get_single_property",prop_id:$("#prop_id").val(),security:propsSecurity},success:function(e){!0===e.getprops&&houzez_osm_marker_simple(e.props,singlePropMap)},error:function(e){}}),$(".detail-tabs li").on("click",function(){singlePropMap.invalidateSize(),singlePropMap.panTo(singlePropMap.getCenter())})}}else{var map=null,streetCount=0,panorama=null,fenway=new google.maps.LatLng(prop_lat,prop_lng),mapOptions={center:fenway,zoom:15,gestureHandling:"cooperative",styles:google_map_style},panoramaOptions={position:fenway,pov:{heading:34,pitch:10}},initialize=function(){map=new google.maps.Map(document.getElementById("singlePropertyMap"),mapOptions),houzez_is_mobile?map.setOptions({gestureHandling:"cooperative"}):map.setOptions({scrollwheel:!1});var e=$("#securityHouzezMap").val();$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"houzez_get_single_property",prop_id:$("#prop_id").val(),security:e},success:function(e){!0===e.getprops&&(houzezAddMarkers(e.props,map),houzezSetPOIControls(map,map.getCenter()))},error:function(e){}})};$('a[href="#gallery"]').on("shown.bs.tab",function(){setTimeout(tabsHeight,500)}),$('a[href="#singlePropertyMap"]').on("shown.bs.tab",function(){google.maps.event.trigger(map,"resize"),map.setCenter(fenway)}),$('a[href="#street-map"]').on("shown.bs.tab",function(){(streetCount+=1)<=1&&(panorama=new google.maps.StreetViewPanorama(document.getElementById("street-map"),panoramaOptions))}),0<$("#singlePropertyMap").length&&google.maps.event.addDomListener(window,"load",initialize);var MapSection=function(){map=new google.maps.Map(document.getElementById("singlePropertyMapSection"),mapOptions),houzez_is_mobile?map.setOptions({gestureHandling:"cooperative"}):map.setOptions({scrollwheel:!1});var e=$("#securityHouzezMap").val();$.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"houzez_get_single_property",prop_id:$("#prop_id").val(),security:e},success:function(e){if(""!==google_map_style){var a=google_map_style;map.setOptions({styles:a})}!0===e.getprops&&(houzezAddMarkerSimple(e.props,map),houzezSetPOIControls(map,map.getCenter()))},error:function(e){}})};0<$("#singlePropertyMapSection").length&&google.maps.event.addDomListener(window,"load",MapSection)}$(".houzez-gallery-prop-v2:first a[rel^='prettyPhoto']").prettyPhoto({animation_speed:"normal",slideshow:5e3,autoplay_slideshow:!1,allow_resize:!0,default_width:1900,default_height:1e3,keyboard_shortcuts:!0,theme:"light_square"})}}});